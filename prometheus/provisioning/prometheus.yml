global:
  scrape_interval: 15s

scrape_configs:
  # container stats
  - job_name: cadvisor
    static_configs:
      - targets: ['cadvisor:8080']

  # spark master & workers (built-in)
  # - job_name: spark
  #   metrics_path: /metrics/
  #   static_configs:
  #     - targets: ['spark-master:8080', 'spark-worker:8081', 'spark-worker-2:8082']

  # MinIO (optional)
  # docker run -d --name minio-exporter --net soam_default minio/prometheus-exporter
  - job_name: minio
    scheme: http
    metrics_path: /minio/v2/metrics/cluster
    static_configs:
      - targets: [ 'minio:9000' ]

  # Mosquitto (optional) â€“ needs exporter sidecar
  # - job_name: mosquitto
  #   static_configs:
  #     - targets: ['mosquitto-exporter:9234']

  # Ingestor metrics
  - job_name: ingestor
    metrics_path: /api/metrics
    static_configs:
      - targets: ['ingestor:8001']
    # For Kubernetes, use service discovery to auto-discover scaled pods
    # kubernetes_sd_configs:
    #   - role: pod
    #     namespaces:
    #       names: ['default']
    # relabel_configs:
    #   - source_labels: [__meta_kubernetes_pod_label_app]
    #     regex: ingestor
    #     action: keep

  # Backend metrics
  - job_name: backend
    metrics_path: /api/metrics
    static_configs:
      - targets: ['backend:8000']
